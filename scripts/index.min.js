(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
module.exports = function (url, cb) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.onload = function () {
        if (xhr.status === 200) {
            cb(null, JSON.parse(xhr.responseText));
        } else {
            var err = new Error('Cannot get ' + url);
            cb(err);
        }
    };
    xhr.send();
};
},{}],2:[function(require,module,exports){
var getJSON = require('./get-json.js');

function getUrlVars() {
    var vars = {};
    window.location.href.replace(/[#&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
        vars[key] = decodeURIComponent(value);
    });
    return vars;
}

function displayDoc(json,docuri) {
  if (json.hasOwnProperty(docuri)) {
    document.getElementById('no-data').style.display = 'none';
    document.getElementById('data-received').style.display = 'block';
    document.getElementById('reader-container').style.display = 'block';
    document.getElementById('inputs').style.display = 'block';
    document.getElementById('document-title').innerHTML = json[docuri].name;
    var url = json[docuri].url;
    /**
     * Asynchronously downloads PDF.
     */
    pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
      pdfDoc = pdfDoc_;
      document.getElementById('page_count').textContent = pdfDoc.numPages;

      // Initial/first page rendering
      renderPage(pageNum);
    });
  }
} 

// Loaded via <script> tag, create shortcut to access PDF.js exports.
var pdfjsLib = window['pdfjs-dist/build/pdf'];

// The workerSrc property shall be specified.
pdfjsLib.GlobalWorkerOptions.workerSrc = '/scripts/pdf.worker.js';

var pdfDoc = null,
    pageNum = 1,
    pageRendering = false,
    pageNumPending = null,
    canvas = document.getElementById('canvas'),
    ctx = canvas.getContext('2d');

/**
 * Get page info from document, resize canvas accordingly, and render page.
 * @param num Page number.
 */
function renderPage(num) {
  pageRendering = true;
  // Using promise to fetch the page
  pdfDoc.getPage(num).then(function(page) {
    var box = document.getElementById('inputs')
    var width = box.offsetWidth;

    var viewport = page.getViewport({scale: width / page.getViewport({ scale: 1.0 }).width}); // Math.min(window.innerWidth, window.innerHeight) / page.getViewport({scale: 1.0}).width 
    canvas.height = viewport.height;
    canvas.width = viewport.width;

    // Render PDF page into canvas context
    var renderContext = {
      canvasContext: ctx,
      viewport: viewport
    };
    var renderTask = page.render(renderContext);

    // Wait for rendering to finish
    renderTask.promise.then(function() {
      pageRendering = false;
      if (pageNumPending !== null) {
        // New page rendering is pending
        renderPage(pageNumPending);
        pageNumPending = null;
      }
    });
  });

  // Update page counters
  document.getElementById('page_num').textContent = num;
}

/**
 * If another page rendering in progress, waits until the rendering is
 * finised. Otherwise, executes rendering immediately.
 */
function queueRenderPage(num) {
  if (pageRendering) {
    pageNumPending = num;
  } else {
    renderPage(num);
  }
}

/**
 * Displays previous page.
 */
function onPrevPage() {
  if (pageNum <= 1) {
    return;
  }
  pageNum--;
  queueRenderPage(pageNum);
}
document.getElementById('prev').addEventListener('click', onPrevPage);

/**
 * Displays next page.
 */
function onNextPage() {
  if (pageNum >= pdfDoc.numPages) {
    return;
  }
  pageNum++;
  queueRenderPage(pageNum);
}
document.getElementById('next').addEventListener('click', onNextPage);

// Debounce function
function debounce(fn, delay) {
  var timer = null;
  return function() {
    var context = this,
        args = arguments;
    clearTimeout(timer);
    timer = setTimeout(function() {
      fn.apply(context, args);
    }, delay);
  };
}

// Resize page
var resizeTimeout;
window.addEventListener('resize', debounce(function() {
  if (resizeTimeout) {
    window.cancelAnimationFrame(resizeTimeout);
  }
  resizeTimeout = window.requestAnimationFrame(function() {
    renderPage(pageNum);
  });
},100));

// Get document list
getJSON('/documents.json', function (error, json) {
  if (error) console.error(error);
  var listContainer = document.getElementById('list');
  var list = document.createElement('ul');
  for (let key in json) {
    if (json[key].public)Â {
      var link = document.createElement('a');
      link.href = '/#doc=' + key;
      link.textContent = json[key].name;
      link.onclick = function () {
        displayDoc(json, key)
      }
      var item = document.createElement('li');
      item.appendChild(link);
      list.appendChild(item);
    }
  }
  listContainer.appendChild(list);

  var vars = getUrlVars();
  var docuri = '';
  if (vars.hasOwnProperty('livre')) {
    docuri = vars.livre;
  }
  if (vars.hasOwnProperty('doc')) {
    docuri = vars.doc;
  }
  if (docuri != '') {
    displayDoc(json, docuri);
  }
});
},{"./get-json.js":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkZXYvc2NyaXB0cy9nZXQtanNvbi5qcyIsImRldi9zY3JpcHRzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgY2IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgY2IobnVsbCwgSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdDYW5ub3QgZ2V0ICcgKyB1cmwpO1xuICAgICAgICAgICAgY2IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbn07IiwidmFyIGdldEpTT04gPSByZXF1aXJlKCcuL2dldC1qc29uLmpzJyk7XG5cbmZ1bmN0aW9uIGdldFVybFZhcnMoKSB7XG4gICAgdmFyIHZhcnMgPSB7fTtcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKC9bIyZdKyhbXj0mXSspPShbXiZdKikvZ2ksIGZ1bmN0aW9uIChtLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIHZhcnNba2V5XSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhcnM7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlEb2MoanNvbixkb2N1cmkpIHtcbiAgaWYgKGpzb24uaGFzT3duUHJvcGVydHkoZG9jdXJpKSkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduby1kYXRhJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS1yZWNlaXZlZCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFkZXItY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0cycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb2N1bWVudC10aXRsZScpLmlubmVySFRNTCA9IGpzb25bZG9jdXJpXS5uYW1lO1xuICAgIHZhciB1cmwgPSBqc29uW2RvY3VyaV0udXJsO1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IGRvd25sb2FkcyBQREYuXG4gICAgICovXG4gICAgcGRmanNMaWIuZ2V0RG9jdW1lbnQodXJsKS5wcm9taXNlLnRoZW4oZnVuY3Rpb24ocGRmRG9jXykge1xuICAgICAgcGRmRG9jID0gcGRmRG9jXztcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlX2NvdW50JykudGV4dENvbnRlbnQgPSBwZGZEb2MubnVtUGFnZXM7XG5cbiAgICAgIC8vIEluaXRpYWwvZmlyc3QgcGFnZSByZW5kZXJpbmdcbiAgICAgIHJlbmRlclBhZ2UocGFnZU51bSk7XG4gICAgfSk7XG4gIH1cbn0gXG5cbi8vIExvYWRlZCB2aWEgPHNjcmlwdD4gdGFnLCBjcmVhdGUgc2hvcnRjdXQgdG8gYWNjZXNzIFBERi5qcyBleHBvcnRzLlxudmFyIHBkZmpzTGliID0gd2luZG93WydwZGZqcy1kaXN0L2J1aWxkL3BkZiddO1xuXG4vLyBUaGUgd29ya2VyU3JjIHByb3BlcnR5IHNoYWxsIGJlIHNwZWNpZmllZC5cbnBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID0gJy9zY3JpcHRzL3BkZi53b3JrZXIuanMnO1xuXG52YXIgcGRmRG9jID0gbnVsbCxcbiAgICBwYWdlTnVtID0gMSxcbiAgICBwYWdlUmVuZGVyaW5nID0gZmFsc2UsXG4gICAgcGFnZU51bVBlbmRpbmcgPSBudWxsLFxuICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSxcbiAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuLyoqXG4gKiBHZXQgcGFnZSBpbmZvIGZyb20gZG9jdW1lbnQsIHJlc2l6ZSBjYW52YXMgYWNjb3JkaW5nbHksIGFuZCByZW5kZXIgcGFnZS5cbiAqIEBwYXJhbSBudW0gUGFnZSBudW1iZXIuXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclBhZ2UobnVtKSB7XG4gIHBhZ2VSZW5kZXJpbmcgPSB0cnVlO1xuICAvLyBVc2luZyBwcm9taXNlIHRvIGZldGNoIHRoZSBwYWdlXG4gIHBkZkRvYy5nZXRQYWdlKG51bSkudGhlbihmdW5jdGlvbihwYWdlKSB7XG4gICAgdmFyIGJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dHMnKVxuICAgIHZhciB3aWR0aCA9IGJveC5vZmZzZXRXaWR0aDtcblxuICAgIHZhciB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoe3NjYWxlOiB3aWR0aCAvIHBhZ2UuZ2V0Vmlld3BvcnQoeyBzY2FsZTogMS4wIH0pLndpZHRofSk7IC8vIE1hdGgubWluKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpIC8gcGFnZS5nZXRWaWV3cG9ydCh7c2NhbGU6IDEuMH0pLndpZHRoIFxuICAgIGNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7XG4gICAgY2FudmFzLndpZHRoID0gdmlld3BvcnQud2lkdGg7XG5cbiAgICAvLyBSZW5kZXIgUERGIHBhZ2UgaW50byBjYW52YXMgY29udGV4dFxuICAgIHZhciByZW5kZXJDb250ZXh0ID0ge1xuICAgICAgY2FudmFzQ29udGV4dDogY3R4LFxuICAgICAgdmlld3BvcnQ6IHZpZXdwb3J0XG4gICAgfTtcbiAgICB2YXIgcmVuZGVyVGFzayA9IHBhZ2UucmVuZGVyKHJlbmRlckNvbnRleHQpO1xuXG4gICAgLy8gV2FpdCBmb3IgcmVuZGVyaW5nIHRvIGZpbmlzaFxuICAgIHJlbmRlclRhc2sucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgcGFnZVJlbmRlcmluZyA9IGZhbHNlO1xuICAgICAgaWYgKHBhZ2VOdW1QZW5kaW5nICE9PSBudWxsKSB7XG4gICAgICAgIC8vIE5ldyBwYWdlIHJlbmRlcmluZyBpcyBwZW5kaW5nXG4gICAgICAgIHJlbmRlclBhZ2UocGFnZU51bVBlbmRpbmcpO1xuICAgICAgICBwYWdlTnVtUGVuZGluZyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSBwYWdlIGNvdW50ZXJzXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlX251bScpLnRleHRDb250ZW50ID0gbnVtO1xufVxuXG4vKipcbiAqIElmIGFub3RoZXIgcGFnZSByZW5kZXJpbmcgaW4gcHJvZ3Jlc3MsIHdhaXRzIHVudGlsIHRoZSByZW5kZXJpbmcgaXNcbiAqIGZpbmlzZWQuIE90aGVyd2lzZSwgZXhlY3V0ZXMgcmVuZGVyaW5nIGltbWVkaWF0ZWx5LlxuICovXG5mdW5jdGlvbiBxdWV1ZVJlbmRlclBhZ2UobnVtKSB7XG4gIGlmIChwYWdlUmVuZGVyaW5nKSB7XG4gICAgcGFnZU51bVBlbmRpbmcgPSBudW07XG4gIH0gZWxzZSB7XG4gICAgcmVuZGVyUGFnZShudW0pO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGxheXMgcHJldmlvdXMgcGFnZS5cbiAqL1xuZnVuY3Rpb24gb25QcmV2UGFnZSgpIHtcbiAgaWYgKHBhZ2VOdW0gPD0gMSkge1xuICAgIHJldHVybjtcbiAgfVxuICBwYWdlTnVtLS07XG4gIHF1ZXVlUmVuZGVyUGFnZShwYWdlTnVtKTtcbn1cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblByZXZQYWdlKTtcblxuLyoqXG4gKiBEaXNwbGF5cyBuZXh0IHBhZ2UuXG4gKi9cbmZ1bmN0aW9uIG9uTmV4dFBhZ2UoKSB7XG4gIGlmIChwYWdlTnVtID49IHBkZkRvYy5udW1QYWdlcykge1xuICAgIHJldHVybjtcbiAgfVxuICBwYWdlTnVtKys7XG4gIHF1ZXVlUmVuZGVyUGFnZShwYWdlTnVtKTtcbn1cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbk5leHRQYWdlKTtcblxuLy8gRGVib3VuY2UgZnVuY3Rpb25cbmZ1bmN0aW9uIGRlYm91bmNlKGZuLCBkZWxheSkge1xuICB2YXIgdGltZXIgPSBudWxsO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfSwgZGVsYXkpO1xuICB9O1xufVxuXG4vLyBSZXNpemUgcGFnZVxudmFyIHJlc2l6ZVRpbWVvdXQ7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2UoZnVuY3Rpb24oKSB7XG4gIGlmIChyZXNpemVUaW1lb3V0KSB7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlc2l6ZVRpbWVvdXQpO1xuICB9XG4gIHJlc2l6ZVRpbWVvdXQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCkge1xuICAgIHJlbmRlclBhZ2UocGFnZU51bSk7XG4gIH0pO1xufSwxMDApKTtcblxuLy8gR2V0IGRvY3VtZW50IGxpc3RcbmdldEpTT04oJy9kb2N1bWVudHMuanNvbicsIGZ1bmN0aW9uIChlcnJvciwganNvbikge1xuICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB2YXIgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0Jyk7XG4gIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgZm9yIChsZXQga2V5IGluIGpzb24pIHtcbiAgICBpZiAoanNvbltrZXldLnB1YmxpYynCoHtcbiAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgbGluay5ocmVmID0gJy8jZG9jPScgKyBrZXk7XG4gICAgICBsaW5rLnRleHRDb250ZW50ID0ganNvbltrZXldLm5hbWU7XG4gICAgICBsaW5rLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRpc3BsYXlEb2MoanNvbiwga2V5KVxuICAgICAgfVxuICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgaXRlbS5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgfVxuICB9XG4gIGxpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdCk7XG5cbiAgdmFyIHZhcnMgPSBnZXRVcmxWYXJzKCk7XG4gIHZhciBkb2N1cmkgPSAnJztcbiAgaWYgKHZhcnMuaGFzT3duUHJvcGVydHkoJ2xpdnJlJykpIHtcbiAgICBkb2N1cmkgPSB2YXJzLmxpdnJlO1xuICB9XG4gIGlmICh2YXJzLmhhc093blByb3BlcnR5KCdkb2MnKSkge1xuICAgIGRvY3VyaSA9IHZhcnMuZG9jO1xuICB9XG4gIGlmIChkb2N1cmkgIT0gJycpIHtcbiAgICBkaXNwbGF5RG9jKGpzb24sIGRvY3VyaSk7XG4gIH1cbn0pOyJdfQ==
